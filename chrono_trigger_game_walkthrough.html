<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶…æ™‚ç©ºä¹‹é‘°ï¼šäº’å‹•å¼æ™‚ç©ºæ”»ç•¥å„€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Parchment -->
    <!-- Application Structure Plan: A tab-based SPA designed for non-linear exploration. The core structure includes: 1) An interactive timeline ("æ™‚ç©ºä¹‹æ—…") to explore events by era, mirroring the game's core mechanic. 2) An interactive flowchart ("å¤šé‡çµå±€") to visually guide users through the complex ending requirements, directly addressing a user request. 3) Character-centric ("è§’è‰² & è£å‚™") and secret-focused ("ç§˜å¯†å¯¶è—") sections for completionists. 4) A dedicated combat strategy section ("æˆ°é¬¥ç­–ç•¥"). This thematic, task-oriented structure is more intuitive and engaging than a linear report, allowing users to quickly access the information they need without scrolling through irrelevant content. The user flow encourages discovery, starting with the main timeline and branching out to deeper details as desired. -->
    <!-- Visualization & Content Choices: 1. Main Timeline: Goal=Organize. Method=Clickable HTML buttons styled with Tailwind. Interaction=Clicking an era dynamically loads its key events, quests, and items. Justification=Directly simulates the game's time travel for intuitive navigation. 2. Endings Flowchart: Goal=Organize/Show Relationships. Method=HTML divs with Tailwind borders/flexbox to create a tree structure. Interaction=Nodes are clickable, revealing detailed info in a modal/pane. Justification=A visual, interactive representation of complex branching paths is far more effective than a static table. 3. Character Selector: Goal=Compare/Inform. Method=A grid of clickable character portraits. Interaction=Updates a detail view with equipment and stats. Justification=Efficiently organizes character-specific data. 4. Accordions for Secrets: Goal=Organize. Method=HTML/JS accordions. Interaction=Click to expand/collapse. Justification=Keeps the UI clean and prevents information overload. All data is stored in JS objects for dynamic rendering. CONFIRMED: NO Chart.js used as no traditional chart data exists. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FDF6E3; /* Warm Parchment Background */
        }
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        .tab-button.active {
            color: #854d0e; /* Dark Brown */
            border-bottom-color: #854d0e;
        }
        .content-card {
            background-color: #FFFBF0;
            border: 1px solid #EAE0C8;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        .era-button {
            transition: all 0.3s ease;
        }
        .era-button.active {
            background-color: #d97706; /* Amber */
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(217, 119, 6, 0.3);
        }
        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }
        .flowchart-node {
            background-color: #fff;
            border: 2px solid #a16207;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            position: relative;
            min-width: 180px;
        }
        .flowchart-node:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(161, 98, 7, 0.3);
        }
        .flowchart-connector {
            width: 2px;
            background-color: #a16207;
            position: relative;
        }
        .flowchart-branch {
            display: flex;
            justify-content: center;
            gap: 2rem;
            width: 100%;
        }
        .flowchart-branch-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            position: relative;
        }
        .flowchart-branch-item::before {
            content: '';
            position: absolute;
            top: -1.5rem;
            height: 1.5rem;
            width: 2px;
            background-color: #a16207;
        }
        .flowchart-branch::before {
             content: '';
             position: absolute;
             top: -1.5rem;
             left: 50%;
             transform: translateX(-50%);
             width: calc(100% - 200px);
             height: 2px;
             background-color: #a16207;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #FDF6E3;
            margin: auto;
            padding: 2rem;
            border: 1px solid #EAE0C8;
            width: 90%;
            max-width: 600px;
            border-radius: 1rem;
            position: relative;
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="text-stone-800">

    <div id="modal" class="modal">
        <div class="modal-content">
            <span id="modal-close" class="absolute top-4 right-6 text-3xl font-bold cursor-pointer text-stone-500 hover:text-stone-800">&times;</span>
            <h3 id="modal-title" class="text-2xl font-bold text-amber-700 mb-4"></h3>
            <div id="modal-body" class="space-y-2 text-stone-700"></div>
        </div>
    </div>

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-amber-900">è¶…æ™‚ç©ºä¹‹é‘°</h1>
            <p class="text-xl text-amber-800 mt-2">äº’å‹•å¼æ™‚ç©ºæ”»ç•¥å„€</p>
        </header>

        <nav class="flex justify-center border-b-2 border-amber-200 mb-8 flex-wrap">
            <button data-tab="journey" class="tab-button active text-lg font-semibold px-6 py-3">æ™‚ç©ºä¹‹æ—…</button>
            <button data-tab="endings" class="tab-button text-lg font-semibold px-6 py-3">å¤šé‡çµå±€</button>
            <button data-tab="characters" class="tab-button text-lg font-semibold px-6 py-3">è§’è‰² & è£å‚™</button>
            <button data-tab="secrets" class="tab-button text-lg font-semibold px-6 py-3">ç§˜å¯†å¯¶è—</button>
            <button data-tab="combat" class="tab-button text-lg font-semibold px-6 py-3">æˆ°é¬¥ç­–ç•¥</button>
        </nav>

        <main id="main-content">
            <!-- Content will be injected here by JavaScript -->
        </main>
    </div>

    <script>
        const gameData = {
            eras: {
                'BC65M': { 
                    name: 'å²å‰æ™‚ä»£ (B.C. 65,000,000)',
                    icon: 'ğŸ¾',
                    intro: 'åœ¨æé¾èˆ‡åŸå§‹äººå…±å­˜çš„æ™‚ä»£ï¼Œè‰¾æ‹‰åŠ å…¥äº†éšŠä¼ã€‚é€™è£¡çš„é—œéµæ˜¯æ“Šæ•—é˜¿æ‰æ‹‰ï¼Œä¸¦ç‚ºæœªä¾†çš„å¤ªé™½çŸ³å……èƒ½ã€‚',
                    events: [
                        { title: 'è§’è‰²åŠ å…¥', content: 'è‰¾æ‹‰ (Ayla) åŠ å…¥éšŠä¼ã€‚' },
                        { title: 'é—œéµä»»å‹™', content: 'å°æŠ—çˆ¬è¡Œé¡ä¸¦æ“Šæ•—é˜¿æ‰æ‹‰èˆ‡é»‘è‰²æš´é¾ã€‚' },
                        { title: 'é‡è¦é“å…·', content: 'åœ¨å¤ªé™½å®ˆè­·æ‰€æ”¾ç½®æœˆäº®çŸ³ï¼Œä»¥ä¾¿åœ¨æœªä¾†å……èƒ½ç‚ºå¤ªé™½çŸ³ã€‚' },
                        { title: 'éš±è—è¦ç´ ', content: 'å¯ä»¥å¾æ•µäººèº«ä¸Šé­…æƒ‘åˆ°ç¨€æœ‰è£å‚™ã€‚' }
                    ]
                },
                'BC12K': { 
                    name: 'å‰çˆ¾ç‹åœ‹ (B.C. 12,000)',
                    icon: 'ğŸ”®',
                    intro: 'æ¼‚æµ®åœ¨ç©ºä¸­çš„é­”æ³•ç‹åœ‹ï¼Œå……æ»¿ç§˜å¯†èˆ‡é™°è¬€ã€‚é€™æ˜¯æ•…äº‹çš„é—œéµè½‰æŠ˜é»ï¼Œæ‹‰æ²ƒæ–¯é¦–æ¬¡å±•ç¾å…¶ææ€–åŠ›é‡ã€‚',
                    events: [
                        { title: 'é—œéµåŠ‡æƒ…', content: 'æµ·æ´‹å®®æ®¿äº‹ä»¶ï¼Œå…‹ç¾…è«¾çŠ§ç‰²ï¼Œèæ‹‰å¥³ç‹çš„æ‚²åŠ‡ã€‚' },
                        { title: 'éŒ¯éé“å…·', content: 'é»‘è‰²å¯¶çŸ³ã€å¦–é­”åŠç­‰é“å…·åœ¨ç‹åœ‹æ¯€æ»…å¾Œå°‡ç„¡æ³•å–å¾—ã€‚' },
                        { title: 'éš±è—è† å›Š', content: 'å‰çˆ¾å®®æ®¿å’Œå¡è³ˆçˆ¾è—æœ‰é­”æ³•è† å›Šï¼Œå‹™å¿…åœ¨åŠ‡æƒ…æ¨é€²å‰å°‹æ‰¾ã€‚' },
                    ]
                },
                'AD600': {
                    name: 'ä¸­ä¸–ç´€ (A.D. 600)',
                    icon: 'ğŸ°',
                    intro: 'äººé¡èˆ‡é­”æ—äº¤æˆ°çš„æ™‚ä»£ã€‚é’è›™çš„æ‚²åŠ‡ã€è–åŠçš„å‚³èªªä»¥åŠé­”ç‹çš„å´›èµ·éƒ½åœ¨æ­¤ä¸Šæ¼”ã€‚',
                    events: [
                        { title: 'è§’è‰²åŠ å…¥', content: 'é’è›™ (Frog) åŠ å…¥éšŠä¼ã€‚' },
                        { title: 'é—œéµä»»å‹™', content: 'ä¿®å¾©è–åŠã€å°æ±ºé­”ç‹ã€‚' },
                        { title: 'å°å°å¯¶ç®±', content: 'æ­¤æ™‚ä»£çš„å°å°å¯¶ç®±å¯é¸æ“‡ä¸é–‹å•Ÿï¼Œå¾…åˆ°A.D. 1000å¹´å‡ç´šå¾Œå†å–ã€‚é€™æ˜¯ç²å–å¼·åŠ›è£å‚™çš„é—œéµã€‚' },
                        { title: 'æ”¯ç·šä»»å‹™', content: 'åŒ—æ–¹éºè·¡ã€è²æ­å¨œæ£®æ—ã€å½©è™¹è²æ®¼ç­‰é‡è¦æ”¯ç·šçš„èµ·é»ã€‚' }
                    ]
                },
                'AD1000': {
                    name: 'ç¾ä»£ (A.D. 1000)',
                    icon: 'ğŸ‰',
                    intro: 'æ•…äº‹çš„èµ·é»ï¼Œå’Œå¹³çš„åƒå¹´ç¥­å…¸å»å› ä¸€å ´æ„å¤–é–‹å•Ÿäº†æ™‚ç©ºä¹‹æ—…ã€‚è¨±å¤šé—œéµé“å…·å’Œæ”¯ç·šä»»å‹™åœ¨æ­¤æ™‚ä»£å®Œæˆã€‚',
                    events: [
                        { title: 'æ•…äº‹é–‹ç«¯', content: 'åƒå¹´ç¥­å…¸ï¼Œå…‹ç¾…è«¾èˆ‡ç‘ªçˆ¾ç›¸é‡ï¼Œæ„å¤–ç©¿è¶Šè‡³ä¸­ä¸–ç´€ã€‚' },
                        { title: 'å°å°å¯¶ç®±å‡ç´š', content: 'é–‹å•Ÿåœ¨A.D. 600å¹´æœªé–‹å•Ÿçš„å¯¶ç®±ï¼Œå¯ç²å¾—å‡ç´šç‰ˆçš„å¼·åŠ›è£å‚™ã€‚é–‹å•Ÿå¾Œé‚„å¯è¿”å›A.D. 600å¹´æ‹¿å–æ™®é€šç‰ˆã€‚' },
                        { title: 'æ”¯ç·šä»»å‹™å®Œæˆ', content: 'å®Œæˆå½©è™¹è²æ®¼ä»»å‹™ä»¥é›é€ å½©è™¹åŠï¼Œå®ŒæˆåŒ—æ–¹éºè·¡ä»»å‹™å‡ç´šè–åŠã€‚' },
                        { title: 'éŒ¯éé“å…·', content: 'å¨œè¿¦äººå¯«çœŸã€å¼—é‡ŒèŒ¨çš„å…è²»è—¥æ°´ç­‰ã€‚' }
                    ]
                },
                'AD2300': {
                    name: 'æœªä¾† (A.D. 2300)',
                    icon: 'ğŸ¤–',
                    intro: 'è¢«æ‹‰æ²ƒæ–¯æ¯€æ»…å¾Œçš„è’è•ªä¸–ç•Œã€‚æ©Ÿå™¨äººåœ¨æ­¤åŠ å…¥ï¼Œæ­ç¤ºäº†æœ«æ—¥çš„çœŸç›¸ï¼Œä¹Ÿæ˜¯å¾©æ´»å…‹ç¾…è«¾çš„é—œéµå ´æ‰€ã€‚',
                    events: [
                        { title: 'è§’è‰²åŠ å…¥', content: 'æ©Ÿå™¨äºº (Robo) åŠ å…¥éšŠä¼ã€‚' },
                        { title: 'é—œéµåŠ‡æƒ…', content: 'ç™¼ç¾ã€Œæ‹‰æ²ƒæ–¯ä¹‹æ—¥ã€éŒ„åƒï¼Œç²å¾—æ™‚é–“é£›èˆ¹ï¼Œå¾©æ´»å…‹ç¾…è«¾ã€‚' },
                        { title: 'å°å°é–€', content: 'ä½¿ç”¨å……èƒ½å¾Œçš„åŠå¢œé–‹å•Ÿå„åœ“é ‚çš„å°å°é–€ï¼Œå…§æœ‰é»ƒé‡‘è€³ç’°ã€å…‰è¼é•·è¢ç­‰å¼·åŠ›é£¾å“ã€‚' },
                        { title: 'æ”¯ç·šä»»å‹™', content: 'å¤ªé™½çŸ³ä»»å‹™çš„èµ·é»ï¼Œæ©Ÿå™¨äººçš„åŸºå› åœ“é ‚ä»»å‹™ã€‚' }
                    ]
                },
                 'End of Time': {
                    name: 'æ™‚ä¹‹ç›¡é ­',
                    icon: 'â³',
                    intro: 'æ™‚ç©ºæ—…è¡Œè€…çš„ä¸­ç¹¼ç«™ã€‚å¯ä»¥åœ¨æ­¤äº¤æ›éšŠå“¡ã€å­¸ç¿’é­”æ³•ï¼Œä¸¦ç²å¾—é—œæ–¼å¦‚ä½•æ“Šæ•—æ‹‰æ²ƒæ–¯çš„æç¤ºã€‚',
                    events: [
                        { title: 'æ ¸å¿ƒåŠŸèƒ½', content: 'æ›´æ›éšŠå“¡ã€å®Œå…¨å›å¾©ã€‚' },
                        { title: 'å­¸ç¿’é­”æ³•', content: 'èˆ‡å²ä½©å¥‡æ­å°è©±ï¼Œå…¨å“¡å­¸ç¿’é­”æ³•èƒ½åŠ›ã€‚' },
                        { title: 'å²ä½©å¥‡æ­æŒ‘æˆ°', content: 'é‡è¤‡æŒ‘æˆ°å²ä½©å¥‡æ­å¯æ ¹æ“šéšŠä¼ç­‰ç´šç²å¾—èƒ½åŠ›è† å›Šå’Œè¬èƒ½è—¥ï¼Œæ˜¯è§’è‰²æˆé•·çš„é—œéµã€‚' },
                        { title: 'é‡è¦æç¤º', content: 'æˆ´å¸½å­çš„è€äººï¼ˆåŠ æ–¯å¸•ï¼‰æœƒæä¾›é—œæ–¼å¾ŒæœŸæ”¯ç·šä»»å‹™çš„æŒ‡å¼•ã€‚' }
                    ]
                }
            },
            endings: [
                { id: 'start', text: 'éŠæˆ²é–‹å§‹', parent: null, type: 'start' },
                { id: 'e1', text: 'è¶…è¶Šæ™‚é–“', parent: 'main_quest_end', type: 'good', desc: 'ã€æ­£å¸¸çµå±€ã€‘å¾©æ´»å…‹ç¾…è«¾å¾Œæ“Šæ•—æ‹‰æ²ƒæ–¯ã€‚å¤¥ä¼´å€‘è¿”å›å„è‡ªæ™‚ä»£ï¼Œä¸–ç•Œè¿ä¾†å’Œå¹³ã€‚' },
                { id: 'e2', text: 'å¤¢æƒ³ä¼åŠƒ', parent: 'ng_plus', type: 'special', desc: 'ã€é–‹ç™¼è€…çµå±€ã€‘åœ¨æ–°éŠæˆ²+ä¸­ï¼Œæ–¼ç‰¹å®šæ™‚é–“é»ï¼ˆå¦‚æ“Šæ•—é­”ç‹å¾Œï¼‰æ“Šæ•—æ‹‰æ²ƒæ–¯ï¼Œæœƒè¦‹åˆ°éŠæˆ²çš„é–‹ç™¼åœ˜éšŠã€‚' },
                { id: 'e3', text: 'æ™šå®‰', parent: 'ng_plus', type: 'bad', desc: 'ã€å£çµå±€ã€‘åœ¨æ–°éŠæˆ²+ä¸­ï¼Œé¦–æ¬¡æŠµé”æ™‚ä¹‹ç›¡é ­å¾Œï¼Œç«‹å³é€éå‚³é€å™¨æŒ‘æˆ°ä¸¦æ“Šæ•—æ‹‰æ²ƒæ–¯ã€‚ä¸–ç•Œè¢«ç†Ÿç¡çš„æ‹‰æ²ƒæ–¯åå™¬ã€‚' },
                { id: 'e4', text: 'å®ˆè­·è€…ç¹¼æ‰¿è€…', parent: 'ng_plus', type: 'bad', desc: 'ã€å£çµå±€ã€‘åœ¨æ–°éŠæˆ²+ä¸­ï¼Œç‘ªçˆ¾å›åˆ°å…¬å…ƒ1000å¹´å¾Œç«‹å³æ“Šæ•—æ‹‰æ²ƒæ–¯ã€‚ç‘ªçˆ¾æˆç‚ºå­¤å–®çš„å¥³ç‹ã€‚' },
                { id: 'e5', text: 'å‚³å¥‡è‹±é›„', parent: 'ng_plus', type: 'bad', desc: 'ã€å£çµå±€ã€‘åœ¨æ–°éŠæˆ²+ä¸­ï¼Œç²å¾—è‹±é›„å‹³ç« å‰æ“Šæ•—æ‹‰æ²ƒæ–¯ã€‚å¡”å¡”æˆç‚ºäº†è¢«èª¤èªçš„è‹±é›„ã€‚' },
                { id: 'e6', text: 'èª“è¨€', parent: 'frog_quest', type: 'neutral', desc: 'ã€é’è›™çµå±€ã€‘åœ¨æ–°éŠæˆ²+ä¸­ï¼Œé’è›™ç²å¾—ä¿®å¾©å¾Œçš„è–åŠå¾Œæ“Šæ•—æ‹‰æ²ƒæ–¯ã€‚é’è›™èˆ‡é­”ç‹çš„æ©æ€¨å¾—åˆ°è§£æ±ºã€‚' },
                { id: 'e7', text: 'æé¾æ™‚ä»£', parent: 'dino_age_end', type: 'bad', desc: 'ã€æé¾çµå±€ã€‘åœ¨æ–°éŠæˆ²+ä¸­ï¼Œæ“Šæ•—é­”ç‹ä½†åœ¨å²å‰æ™‚ä»£åŠ‡æƒ…çµæŸå‰æ“Šæ•—æ‹‰æ²ƒæ–¯ã€‚æé¾çµ±æ²»äº†ä¸–ç•Œã€‚' },
                { id: 'e8', text: 'å…ˆçŸ¥æ‰€æ±‚', parent: 'zeal_fall', type: 'neutral', desc: 'ã€é­”ç‹çµå±€ã€‘åœ¨æ–°éŠæˆ²+ä¸­ï¼Œæ“Šæ•—é˜¿æ‰æ‹‰å¾Œæ“Šæ•—æ‹‰æ²ƒæ–¯ï¼Œæ­ç¤ºå…ˆçŸ¥ï¼ˆé­”ç‹ï¼‰çš„çœŸå¯¦ç›®çš„ã€‚' },
                { id: 'e9', text: 'å•Ÿç¤ºéŒ„', parent: 'crono_death', type: 'bad', desc: 'ã€å£çµå±€ã€‘åœ¨æµ·æ´‹å®®æ®¿äº‹ä»¶ä¸­æ“Šæ•—æ‹‰æ²ƒæ–¯ï¼ˆä½†å…‹ç¾…è«¾æ­»äº¡ï¼‰ã€‚ä¸–ç•Œè¢«æ‹‰æ²ƒæ–¯åå™¬ï¼Œè‹±é›„å€‘å¤±æ•—äº†ã€‚' },
                { id: 'e10', text: 'å¤¢ä¹‹çµ‚ç« ', parent: 'all_sidequests', type: 'good', desc: 'ã€æœ€å®Œæ•´çµå±€ã€‘å®Œæˆæ‰€æœ‰ä¸»è¦æ”¯ç·šä»»å‹™å¾Œï¼Œå¾©æ´»å…‹ç¾…è«¾ä¸¦æ“Šæ•—æ‹‰æ²ƒæ–¯ã€‚æ‰€æœ‰è§’è‰²çš„å‘½é‹éƒ½å¾—åˆ°äº†æœ€åœ“æ»¿çš„äº¤ä»£ã€‚' },
                { id: 'main_quest_path', text: 'ä¸»ç·šåŠ‡æƒ…æ¨é€²', parent: 'start', type: 'path'},
                { id: 'ng_plus', text: 'æ–°éŠæˆ²+(NG+)', parent: 'main_quest_path', type: 'path'},
                { id: 'frog_quest', text: 'å®Œæˆé’è›™æ”¯ç·š', parent: 'ng_plus', type: 'path'},
                { id: 'dino_age_end', text: 'å®Œæˆå²å‰æ™‚ä»£', parent: 'frog_quest', type: 'path'},
                { id: 'zeal_fall', text: 'å‰çˆ¾ç‹åœ‹æ¯€æ»…', parent: 'dino_age_end', type: 'path'},
                { id: 'crono_death', text: 'å…‹ç¾…è«¾æ­»äº¡', parent: 'zeal_fall', type: 'path'},
                { id: 'all_sidequests', text: 'å®Œæˆæ‰€æœ‰æ”¯ç·š', parent: 'crono_death', type: 'path'},
                { id: 'main_quest_end', text: 'å¾©æ´»å…‹ç¾…è«¾', parent: 'all_sidequests', type: 'path'},
            ],
            characters: {
                crono: { name: 'å…‹ç¾…è«¾', icon: 'ğŸ‘¤', desc: 'æ²‰é»˜çš„ä¸»è§’ï¼Œé›·å±¬æ€§çš„åŠå£«ï¼Œèƒ½åŠ›å…¨é¢ï¼Œæ“æœ‰å¼·åŠ›çš„å–®é«”èˆ‡ç¾¤é«”æŠ€èƒ½ã€‚', weapons: 'å¤¢æƒ³è¿½å°‹è€… / å½©è™¹åŠ', armor: 'å¸ç‹é§ç”² / ç¨œé¡ç¦®æœ', helm: 'å¤§å¸«çš‡å†  / ç¨œé¡é ­ç›”', accessory: 'ç¨œé¡çœ¼é¡ / æ†¤æ€’æ‰‹ç’°' },
                marle: { name: 'ç‘ªçˆ¾', icon: 'ğŸ‘‘', desc: 'å˜‰è¿ªäºå…¬ä¸»ï¼Œæ°´/å†°å±¬æ€§çš„æ²»ç™‚è€…èˆ‡è¼”åŠ©è§’è‰²ï¼ŒåŠ é€Ÿé­”æ³•æ˜¯æˆ°é¬¥é—œéµã€‚', weapons: 'ç¶­ç´æ–¯å¼“ / å¥³æ­¦ç¥å¼“', armor: 'ç¨œé¡ç¦®æœ / å¸ç‹ç¦®æœ', helm: 'å¤©ä½¿é ­é£¾ / ç¨œé¡é ­ç›”', accessory: 'é»ƒé‡‘è€³ç’° / ç¶ è‰²å¤¢æƒ³' },
                lucca: { name: 'ç›§å¡', icon: 'ğŸ‘“', desc: 'å¤©æ‰ç™¼æ˜å®¶ï¼Œç«å±¬æ€§çš„å¼·åŠ›é­”æ³•å¸«ï¼Œæ“æœ‰éŠæˆ²ä¸­æœ€å¼·çš„é­”æ³•æ”»æ“Šã€‚', weapons: 'é­”æ³•æ§ / å¥‡è¹Ÿæ§', armor: 'ç¨œé¡ç¦®æœ / å…ƒç´ ç›¾ç”²', helm: 'å¤©ä½¿é ­é£¾ / ç¨œé¡é ­ç›”', accessory: 'ç¨œé¡çœ¼é¡ / é»ƒé‡‘è€³ç’°' },
                robo: { name: 'æ©Ÿå™¨äºº', icon: 'ğŸ¤–', desc: 'ä¾†è‡ªæœªä¾†çš„æ©Ÿå™¨äººï¼Œæš—å½±å±¬æ€§ï¼Œæ˜¯å€‹èƒ½æ‰“èƒ½è£œçš„å¤šé¢æ‰‹ï¼Œç‰©ç†æ”»æ“Šèˆ‡æ²»ç™‚èƒ½åŠ›å…¼å‚™ã€‚', weapons: 'å±æ©Ÿä¹‹è‡‚ / æœ«æ—¥ä¹‹è‡‚', armor: 'å¸ç‹é§ç”² / èœ¥èœ´çš®ç”²', helm: 'å¤§å¸«çš‡å†  / ç¨œé¡é ­ç›”', accessory: 'é¾ä¹‹æ·š / é»ƒé‡‘è€³ç’°' },
                frog: { name: 'é’è›™', icon: 'ğŸ¸', desc: 'è¢«è©›å’’çš„é¨å£«ï¼Œæ°´å±¬æ€§ï¼Œæ˜¯å€‹å„ªç§€çš„ç‰©ç†åŠå£«å’Œæ¬¡è¦æ²»ç™‚è€…ã€‚', weapons: 'è–åŠäºŒå‹', armor: 'å¸ç‹é§ç”² / èœ¥èœ´çš®ç”²', helm: 'å¤§å¸«çš‡å†  / ç¨œé¡é ­ç›”', accessory: 'å† è»å¾½ç«  / é»ƒé‡‘è€³ç’°' },
                ayla: { name: 'è‰¾æ‹‰', icon: 'ğŸ¾', desc: 'å²å‰æ™‚ä»£çš„é…‹é•·ï¼Œç„¡å±¬æ€§ç‰©ç†æ”»æ“Šè€…ï¼Œå‚·å®³éš¨ç­‰ç´šæå‡ï¼Œé­…æƒ‘æŠ€èƒ½æ˜¯ç²å–ç¨€æœ‰é“å…·çš„é—œéµã€‚', weapons: 'é’éŠ…æ‹³å¥—', armor: 'ç¨œé¡ç¦®æœ / èœ¥èœ´çš®ç”²', helm: 'å¤©ä½¿é ­é£¾ / ç¨œé¡é ­ç›”', accessory: 'å‹‡æ°£å¾½ç«  / æ†¤æ€’æ‰‹ç’°' },
                magus: { name: 'é­”ç‹', icon: 'ğŸ˜ˆ', desc: 'ä¾†è‡ªå‰çˆ¾ç‹åœ‹çš„ç‹å­ï¼Œå…¨å±¬æ€§é­”æ³•å¤§å¸«ï¼Œæ“æœ‰å¼·å¤§çš„é­”æ³•ï¼Œä½†ç¼ºä¹çµ„åˆæŠ€ã€‚', weapons: 'å¤¢é­˜é®åˆ€ / å„é‹é®åˆ€', armor: 'å½±ç¾½é•·è¢', helm: 'é™°å½±é ­ç›”', accessory: 'ç¨œé¡çœ¼é¡ / é»ƒé‡‘è€³ç’°' },
            },
            secrets: {
                sealed_chests: {
                    title: 'å°å°å¯¶ç®±èˆ‡å‡ç´šè·¯å¾‘',
                    intro: 'å°å°å¯¶ç®±æ˜¯ç²å–å¼·åŠ› elemental é§ç”²å’Œæ­¦å™¨çš„é—œéµã€‚æ ¸å¿ƒæŠ€å·§æ˜¯ï¼šå…ˆåœ¨å…¬å…ƒ600å¹´ã€Œè§¸ç¢°ä½†ä¸æ‹¿å–ã€ï¼Œç„¶å¾Œåˆ°å…¬å…ƒ1000å¹´é–‹å•Ÿç²å¾—å‡ç´šç‰ˆï¼Œæœ€å¾Œå†è¿”å›å…¬å…ƒ600å¹´æ‹¿å–æ™®é€šç‰ˆï¼Œé”æˆã€Œä¸€ç®±å…©æ‹¿ã€ã€‚',
                    items: [
                        { location: 'æ³¢çˆ¾æ‘é•·è€å®¶', normal: 'ç™½è‰²/é»‘è‰²èƒŒå¿ƒ', upgraded: 'ç™½è‰²/é»‘è‰²é§ç”²' },
                        { location: 'ç‰¹é­¯æ–¯æ—…é¤¨', normal: 'è—è‰²èƒŒå¿ƒ', upgraded: 'è—è‰²é§ç”²' },
                        { location: 'å˜‰è¿ªäºåŸå ¡', normal: 'ç´…è‰²èƒŒå¿ƒ', upgraded: 'ç´…è‰²é§ç”²' },
                        { location: 'åŒ—æ–¹éºè·¡', normal: 'æ–°æ˜Ÿé§ç”², å¦–ç²¾å¼“, å¡åˆ©åˆ€', upgraded: 'æœˆå…‰é§ç”², å¥³æ­¦ç¥å¼“, æ¿•å©†ä¹‹åˆƒ' },
                    ]
                },
                missable_items: {
                    title: 'é—œéµéŒ¯éé“å…·èˆ‡äº‹ä»¶',
                    intro: 'æœ‰äº›é“å…·å’Œäº‹ä»¶å…·æœ‰åš´æ ¼çš„æ™‚é–“çª—å£ï¼Œä¸€æ—¦éŒ¯éå°±ç„¡æ³•å†æ¬¡ç²å¾—ã€‚é€™ä»½æ¸…å–®å¹«åŠ©å®Œç¾ä¸»ç¾©è€…é¿å…éºæ†¾ã€‚',
                    items: [
                        { item: 'å¨œè¿¦äººå¯«çœŸ', reason: 'é¦¬è«¾åˆ©äºæ•™å ‚ä¸€æ¬¡æ€§ç²å–ï¼Œå¯äº¤æ›é­”æ³•è† å›Šã€‚' },
                        { item: 'é»‘è‰²å¯¶çŸ³', reason: 'å‰çˆ¾ç‹åœ‹æ¯€æ»…å¾Œæ¶ˆå¤±ï¼Œä¸‰äººæŠ€æ‰€éœ€ã€‚' },
                        { item: 'å¥§èŒ²è¤²å­', reason: 'å¥§èŒ²å ¡å£˜æˆ°é¬¥ä¸­é­…æƒ‘é™å®šï¼Œä¸ç¹¼æ‰¿è‡³æ–°éŠæˆ²+' },
                        { item: 'å®ˆè¡›éšŠé•·é»ƒé‡‘é ­ç›”', reason: 'åŠ‡æƒ…æ¨é€²å¾Œç„¡æ³•èˆ‡å®ˆè¡›éšŠé•·å°è©±ç²å¾—ã€‚' }
                    ]
                }
            },
            combat: {
                teams: [
                    { combo: 'å…‹ç¾…è«¾ / æ©Ÿå™¨äºº / è‰¾æ‹‰', type: 'ç‰©ç†ç‹è€…', desc: 'éŠæˆ²å…¬èªçš„æœ€å¼·ç‰©ç†éšŠä¼ã€‚è¼¸å‡ºæ¥µé«˜ï¼Œæ©Ÿå™¨äººæä¾›å¯é æ²»ç™‚ï¼Œè‰¾æ‹‰çš„é­…æƒ‘èƒ½åŠ›ç„¡å¯æ›¿ä»£ï¼Œèƒ½æ‡‰å°çµ•å¤§å¤šæ•¸æˆ°é¬¥ã€‚' },
                    { combo: 'å…‹ç¾…è«¾ / ç‘ªçˆ¾ / ç›§å¡', type: 'é­”æ³•æ ¸å¿ƒ', desc: 'ç¶“å…¸çš„åˆå§‹éšŠä¼ã€‚å…ƒç´ è¦†è“‹é¢å»£ï¼Œç‘ªçˆ¾çš„åŠ é€Ÿå’Œæ²»ç™‚éå¸¸é—œéµï¼Œç›§å¡çš„é­”æ³•æ˜¯ä¸»è¦è¼¸å‡ºæ‰‹æ®µã€‚é¢å°é­”æ³•æŠ—æ€§é«˜çš„æ•µäººæœƒæ¯”è¼ƒåƒåŠ›ã€‚' },
                    { combo: 'é’è›™ / ç‘ªçˆ¾', type: 'ä¸­æœŸéœ¸ä¸»', desc: 'éŠæˆ²ä¸­æœŸæ¥µç‚ºå¼·å¤§çš„äºŒäººçµ„ã€‚é›™äººæŠ€ã€Œå†°æ°´ã€MPæ¶ˆè€—ä½ã€å‚·å®³é«˜ï¼Œé…åˆç‘ªçˆ¾çš„åŠ é€Ÿï¼Œå¯ä»¥è¼•é¬†ç¢¾å£“è¨±å¤šè¿·å®®ã€‚' },
                ],
                bosses: [
                    { name: 'èµ«å…‹è˜­ (Heckran)', strategy: 'å®Œå…¨å…ç–«ç‰©ç†æ”»æ“Šï¼Œåªèƒ½ç”¨é­”æ³•ã€‚ç•¶ä»–èªªã€ŒçŸ­æš«åæ“Šã€æ™‚æ”»æ“Šï¼Œç•¶ä»–èªªã€Œè©¦è‘—æ”»æ“Šå§ã€æ™‚é˜²ç¦¦ï¼Œå¦å‰‡æœƒè§¸ç™¼å¼·åŠ›åæ“Šã€‚' },
                    { name: 'å·¨å‹è“‹äº (Giga Gaia)', strategy: 'å®ƒçš„é›™æ‰‹æœƒä½¿ç”¨ç«å’Œæ°´å±¬æ€§æ”»æ“Šã€‚ç‚ºå…‹ç¾…è«¾å’Œå¦ä¸€ä½éšŠå“¡è£å‚™ç´…è‰²é§ç”²å’Œè—è‰²é§ç”²ï¼Œå¯ä»¥å¸æ”¶å‚·å®³ä¸¦å›å¾©HPï¼Œå¤§å¹…é™ä½é›£åº¦ã€‚' },
                    { name: 'å¤ªé™½ä¹‹å­ (Son of Sun)', strategy: 'å‘¨åœæœ‰äº”å€‹ç«ç„°ï¼Œåªæœ‰ä¸€å€‹æ˜¯çœŸçš„ã€‚æ”»æ“ŠéŒ¯èª¤çš„æœƒè§¸ç™¼å¼·åŠ›åæ“Šã€‚è£å‚™ç´…è‰²é§ç”²æˆ–ç´…å¯¶çŸ³é§ç”²å¸æ”¶å‚·å®³ï¼Œç„¶å¾Œè€å¿ƒæ¸¬è©¦å“ªå€‹æ˜¯çœŸèº«ã€‚' },
                    { name: 'æ‹‰æ²ƒæ–¯æ ¸å¿ƒ (Lavos Core)', strategy: 'æœ€çµ‚æˆ°ã€‚å³å´éƒ¨åˆ†æ˜¯æœ¬é«”ã€‚è£å‚™ç¨œé¡çœ¼é¡æœ€å¤§åŒ–è¼¸å‡ºï¼Œé»ƒé‡‘è€³ç’°æ¸›å°‘MPæ¶ˆè€—ã€‚ç‘ªçˆ¾çš„åŠ é€Ÿå¿…ä¸å¯å°‘ã€‚é›†ä¸­ç«åŠ›æ”»æ“Šå³å´éƒ¨åˆ†å³å¯ã€‚' }
                ]
            }
        };

        const mainContent = document.getElementById('main-content');
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const modalClose = document.getElementById('modal-close');

        let activeTab = 'journey';
        let activeEra = 'AD1000';
        let selectedCharacter = 'crono';

        function renderJourney() {
            const eraData = gameData.eras[activeEra];
            mainContent.innerHTML = `
                <div id="journey-content" class="fade-in">
                    <p class="text-center text-amber-700 text-lg mb-6">${gameData.eras[Object.keys(gameData.eras)[0]].intro}</p>
                    <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
                        ${Object.keys(gameData.eras).map(key => `
                            <button data-era="${key}" class="era-button ${key === activeEra ? 'active' : ''} text-sm md:text-base font-semibold px-4 py-2 rounded-full bg-amber-100 text-amber-800 hover:bg-amber-200 border border-amber-200">
                                <span class="hidden sm:inline">${gameData.eras[key].name}</span>
                                <span class="sm:hidden">${gameData.eras[key].icon}</span>
                            </button>
                        `).join('')}
                    </div>
                    <div class="content-card p-6 md:p-8">
                        <h2 class="text-2xl md:text-3xl font-bold text-amber-800 mb-2">${eraData.icon} ${eraData.name}</h2>
                        <p class="text-stone-600 mb-6">${eraData.intro}</p>
                        <div class="space-y-4">
                            ${eraData.events.map(event => `
                                <div>
                                    <h3 class="font-bold text-amber-700 text-lg">${event.title}</h3>
                                    <p class="text-stone-600">${event.content}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            addJourneyListeners();
        }
        
        function renderEndings() {
            mainContent.innerHTML = `
                <div id="endings-content" class="fade-in">
                     <p class="text-center text-amber-700 text-lg mb-8 max-w-3xl mx-auto">ã€Šè¶…æ™‚ç©ºä¹‹é‘°ã€‹çš„çµå±€ç”±æŒ‘æˆ°æœ€çµ‚é ­ç›®æ‹‰æ²ƒæ–¯çš„ã€Œæ™‚æ©Ÿã€æ±ºå®šã€‚åœ¨æ–°éŠæˆ²+æ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥éš¨æ™‚æŒ‘æˆ°æ‹‰æ²ƒæ–¯ï¼Œå¾è€Œé–‹å•Ÿä¸åŒçš„çµå±€åˆ†æ”¯ã€‚æ­¤åœ–è¡¨å±•ç¤ºäº†ä¸»è¦çš„åŠ‡æƒ…ç¯€é»èˆ‡å®ƒå€‘å°å‘çš„çµå±€ï¼Œé»æ“Šç¯€é»å¯æŸ¥çœ‹è©³ç´°è³‡è¨Šã€‚</p>
                    <div class="flowchart-container overflow-x-auto pb-4">
                        <div class="flowchart min-w-[800px] md:min-w-0">
                            <div class="flowchart-node" data-ending-id="start">${gameData.endings.find(e => e.id === 'start').text}</div>
                            <div class="flowchart-connector" style="height: 2rem;"></div>
                            <div class="flowchart-node" data-ending-id="main_quest_path">${gameData.endings.find(e => e.id === 'main_quest_path').text}</div>
                            <div class="flowchart-connector" style="height: 2rem;"></div>
                            <div class="flowchart-node" data-ending-id="ng_plus">${gameData.endings.find(e => e.id === 'ng_plus').text}</div>
                            <div class="flowchart-connector" style="height: 2rem;"></div>
                            
                            <div class="flowchart-branch">
                                <div class="flowchart-branch-item">
                                    <div class="flowchart-node" data-ending-id="e3">${gameData.endings.find(e => e.id === 'e3').text}</div>
                                </div>
                                <div class="flowchart-branch-item">
                                     <div class="flowchart-node" data-ending-id="e4">${gameData.endings.find(e => e.id === 'e4').text}</div>
                                </div>
                                <div class="flowchart-branch-item">
                                     <div class="flowchart-node" data-ending-id="e5">${gameData.endings.find(e => e.id === 'e5').text}</div>
                                </div>
                            </div>
                            
                            <div class="flowchart-connector" style="height: 2rem;"></div>
                            <div class="flowchart-node" data-ending-id="frog_quest">${gameData.endings.find(e => e.id === 'frog_quest').text}</div>
                            <div class="flowchart-branch">
                                <div class="flowchart-branch-item">
                                    <div class="flowchart-node" data-ending-id="e6">${gameData.endings.find(e => e.id === 'e6').text}</div>
                                </div>
                            </div>

                            <div class="flowchart-connector" style="height: 2rem;"></div>
                            <div class="flowchart-node" data-ending-id="dino_age_end">${gameData.endings.find(e => e.id === 'dino_age_end').text}</div>
                             <div class="flowchart-branch">
                                <div class="flowchart-branch-item">
                                    <div class="flowchart-node" data-ending-id="e7">${gameData.endings.find(e => e.id === 'e7').text}</div>
                                </div>
                            </div>

                            <div class="flowchart-connector" style="height: 2rem;"></div>
                            <div class="flowchart-node" data-ending-id="zeal_fall">${gameData.endings.find(e => e.id === 'zeal_fall').text}</div>
                            <div class="flowchart-branch">
                                <div class="flowchart-branch-item">
                                    <div class="flowchart-node" data-ending-id="e8">${gameData.endings.find(e => e.id === 'e8').text}</div>
                                </div>
                            </div>

                            <div class="flowchart-connector" style="height: 2rem;"></div>
                            <div class="flowchart-node" data-ending-id="crono_death">${gameData.endings.find(e => e.id === 'crono_death').text}</div>
                             <div class="flowchart-branch">
                                <div class="flowchart-branch-item">
                                    <div class="flowchart-node" data-ending-id="e9">${gameData.endings.find(e => e.id === 'e9').text}</div>
                                </div>
                                 <div class="flowchart-branch-item">
                                    <div class="flowchart-node" data-ending-id="e2">${gameData.endings.find(e => e.id === 'e2').text}</div>
                                </div>
                            </div>
                            
                            <div class="flowchart-connector" style="height: 2rem;"></div>
                            <div class="flowchart-node" data-ending-id="all_sidequests">${gameData.endings.find(e => e.id === 'all_sidequests').text}</div>
                             <div class="flowchart-branch">
                                <div class="flowchart-branch-item">
                                    <div class="flowchart-node" data-ending-id="e10">${gameData.endings.find(e => e.id === 'e10').text}</div>
                                </div>
                            </div>
                            
                            <div class="flowchart-connector" style="height: 2rem;"></div>
                            <div class="flowchart-node" data-ending-id="main_quest_end">${gameData.endings.find(e => e.id === 'main_quest_end').text}</div>
                             <div class="flowchart-branch">
                                <div class="flowchart-branch-item">
                                    <div class="flowchart-node" data-ending-id="e1">${gameData.endings.find(e => e.id === 'e1').text}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            addEndingListeners();
        }
        
        function renderCharacters() {
            const charData = gameData.characters[selectedCharacter];
             mainContent.innerHTML = `
                <div id="characters-content" class="fade-in">
                    <p class="text-center text-amber-700 text-lg mb-8 max-w-3xl mx-auto">éŠæˆ²å…±æœ‰ä¸ƒä½å¯ç©è§’è‰²ï¼Œæ¯ä½éƒ½æœ‰ç¨ç‰¹çš„æŠ€èƒ½å’Œå®šä½ã€‚åˆç†çš„éšŠä¼æ­é…æ˜¯å…‹æœæŒ‘æˆ°çš„é—œéµã€‚é»æ“Šä¸‹æ–¹é ­åƒä¾†æŸ¥çœ‹æ¯ä½è§’è‰²çš„è©³ç´°è³‡è¨Šå’Œæ¨è–¦çš„æœ€çµ‚è£å‚™ã€‚</p>
                    <div class="flex justify-center flex-wrap gap-4 mb-8">
                        ${Object.keys(gameData.characters).map(key => `
                            <button data-char="${key}" class="p-2 rounded-full transition-transform duration-300 ${key === selectedCharacter ? 'bg-amber-400 scale-110 shadow-lg' : 'bg-amber-200 hover:bg-amber-300'}">
                                <span class="text-4xl">${gameData.characters[key].icon}</span>
                            </button>
                        `).join('')}
                    </div>
                     <div class="content-card p-6 md:p-8">
                        <div class="flex flex-col md:flex-row items-center gap-6">
                            <div class="text-8xl">${charData.icon}</div>
                            <div class="flex-1 text-center md:text-left">
                                <h2 class="text-3xl font-bold text-amber-800">${charData.name}</h2>
                                <p class="text-stone-600 mt-1">${charData.desc}</p>
                            </div>
                        </div>
                        <div class="mt-8 border-t border-amber-200 pt-6">
                            <h3 class="text-xl font-bold text-amber-700 mb-4 text-center">æ¨è–¦æœ€çµ‚è£å‚™</h3>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                                <div><p class="font-semibold text-stone-500">æ­¦å™¨</p><p>${charData.weapons}</p></div>
                                <div><p class="font-semibold text-stone-500">é§ç”²</p><p>${charData.armor}</p></div>
                                <div><p class="font-semibold text-stone-500">é ­ç›”</p><p>${charData.helm}</p></div>
                                <div><p class="font-semibold text-stone-500">é£¾å“</p><p>${charData.accessory}</p></div>
                            </div>
                        </div>
                     </div>
                </div>
            `;
            addCharacterListeners();
        }

        function renderSecrets() {
            mainContent.innerHTML = `
                <div id="secrets-content" class="fade-in">
                    <p class="text-center text-amber-700 text-lg mb-8 max-w-3xl mx-auto">ã€Šè¶…æ™‚ç©ºä¹‹é‘°ã€‹çš„ä¸–ç•Œä¸­éš±è—è‘—è¨±å¤šç§˜å¯†ï¼Œå¾å¯ä»¥å‡ç´šçš„å°å°å¯¶ç®±åˆ°ä¸€æ—¦éŒ¯éå°±ç„¡æ³•æŒ½å›çš„ç¨€æœ‰é“å…·ã€‚é€™è£¡æ˜¯ç‚ºè¿½æ±‚100%å®Œæˆåº¦çš„ç©å®¶æº–å‚™çš„æ¸…å–®ã€‚</p>
                    <div class="space-y-4 max-w-4xl mx-auto">
                        ${Object.keys(gameData.secrets).map(key => {
                            const secret = gameData.secrets[key];
                            return `
                                <div class="content-card">
                                    <button class="accordion-toggle w-full p-4 text-left font-bold text-xl text-amber-800 flex justify-between items-center">
                                        <span>${secret.title}</span>
                                        <span class="transform transition-transform duration-300">â–¼</span>
                                    </button>
                                    <div class="accordion-content px-4 pb-4">
                                        <p class="text-stone-600 mb-4 pt-2 border-t border-amber-100">${secret.intro}</p>
                                        <ul class="space-y-3">
                                            ${secret.items.map(item => `
                                                <li class="p-3 bg-amber-50 rounded-lg">
                                                    ${item.location ? `<p><span class="font-semibold text-amber-700">${item.location}</span></p><p class="text-sm text-stone-500">æ™®é€š: ${item.normal} -> å‡ç´š: ${item.upgraded}</p>` : ''}
                                                    ${item.item ? `<p><span class="font-semibold text-amber-700">${item.item}</span></p><p class="text-sm text-stone-500">${item.reason}</p>` : ''}
                                                </li>
                                            `).join('')}
                                        </ul>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
            addAccordionListeners();
        }

        function renderCombat() {
             mainContent.innerHTML = `
                <div id="combat-content" class="fade-in">
                    <p class="text-center text-amber-700 text-lg mb-8 max-w-3xl mx-auto">æŒæ¡æˆ°é¬¥æŠ€å·§ã€çµ„å»ºå¼·åŠ›éšŠä¼ä¸¦äº†è§£é ­ç›®çš„å¼±é»ï¼Œæ˜¯ç©¿è¶Šæ™‚ç©ºçš„é—œéµã€‚é€™è£¡æä¾›äº†ä¸€äº›æ ¸å¿ƒçš„æˆ°é¬¥ç­–ç•¥ï¼ŒåŠ©æ‚¨æˆ°ç„¡ä¸å‹ã€‚</p>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="content-card p-6">
                            <h3 class="text-2xl font-bold text-amber-800 mb-4 text-center">æ¨è–¦éšŠä¼çµ„åˆ</h3>
                            <div class="space-y-4">
                                ${gameData.combat.teams.map(team => `
                                    <div class="p-4 bg-amber-50 rounded-lg">
                                        <p class="font-bold text-amber-700">${team.combo}</p>
                                        <p class="text-sm font-semibold text-amber-600">${team.type}</p>
                                        <p class="text-stone-600 mt-1">${team.desc}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="content-card p-6">
                             <h3 class="text-2xl font-bold text-amber-800 mb-4 text-center">é—œéµé ­ç›®æˆ°ç­–ç•¥</h3>
                            <div class="space-y-4">
                                ${gameData.combat.bosses.map(boss => `
                                    <div class="p-4 bg-amber-50 rounded-lg">
                                        <p class="font-bold text-amber-700">${boss.name}</p>
                                        <p class="text-stone-600 mt-1">${boss.strategy}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderContent() {
            switch (activeTab) {
                case 'journey':
                    renderJourney();
                    break;
                case 'endings':
                    renderEndings();
                    break;
                case 'characters':
                    renderCharacters();
                    break;
                case 'secrets':
                    renderSecrets();
                    break;
                case 'combat':
                    renderCombat();
                    break;
                default:
                    renderJourney();
            }
        }
        
        function addJourneyListeners() {
            document.querySelectorAll('.era-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    activeEra = e.currentTarget.dataset.era;
                    renderJourney();
                });
            });
        }
        
        function addEndingListeners() {
            document.querySelectorAll('.flowchart-node').forEach(node => {
                node.addEventListener('click', (e) => {
                    const endingId = e.currentTarget.dataset.endingId;
                    const endingData = gameData.endings.find(end => end.id === endingId);
                    if (endingData && endingData.desc) {
                        modalTitle.innerText = endingData.text;
                        modalBody.innerText = endingData.desc;
                        modal.style.display = 'flex';
                    } else if (endingData) {
                        modalTitle.innerText = endingData.text;
                        modalBody.innerText = 'é€™æ˜¯ä¸€å€‹åŠ‡æƒ…è·¯å¾‘ç¯€é»ï¼Œä»£è¡¨äº†æ•…äº‹çš„é€²ç¨‹ã€‚';
                        modal.style.display = 'flex';
                    }
                });
            });
        }
        
        function addCharacterListeners() {
            document.querySelectorAll('[data-char]').forEach(button => {
                button.addEventListener('click', (e) => {
                    selectedCharacter = e.currentTarget.dataset.char;
                    renderCharacters();
                });
            });
        }
        
        function addAccordionListeners() {
            document.querySelectorAll('.accordion-toggle').forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('span:last-child');
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                         icon.style.transform = 'rotate(180deg)';
                    }
                });
            });
        }

        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', (e) => {
                activeTab = e.target.dataset.tab;
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
                renderContent();
            });
        });

        modalClose.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        renderContent();
    </script>
</body>
</html>
