<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ç£é›»å‹•è»Šå……é›»äº’å‹•æŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #030712; /* bg-gray-950 */
            color: #d1d5db; /* text-gray-300 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link.active {
            color: #60a5fa; /* lighter blue for dark theme */
            border-bottom-color: #60a5fa;
            font-weight: 600;
        }
        .connector-btn {
            transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
        }
        .connector-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.3); /* Subtle blue glow */
            border-color: #3b82f6;
        }
        .connector-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
            border-color: #3b82f6;
        }
        .section {
            padding-top: 80px; 
            margin-top: -80px; 
        }
        .card {
            background-color: #111827; /* bg-gray-900 */
            border-color: #374151; /* border-gray-700 */
        }
        .text-header {
            color: #e5e7eb; /* text-gray-200 */
        }
        .text-subheader {
            color: #9ca3af; /* text-gray-400 */
        }
        .text-body {
            color: #d1d5db; /* text-gray-300 */
        }
        .text-accent {
            color: #60a5fa; /* lighter blue */
        }
        .border-accent {
            border-color: #3b82f6;
        }
        input[type="number"], select {
            background-color: #1f2937; /* bg-gray-800 */
            border-color: #4b5563; /* border-gray-600 */
            color: #f3f4f6; /* text-gray-100 */
        }
        input[type="number"]:focus, select:focus {
            border-color: #3b82f6;
            ring-color: #3b82f6;
        }

    </style>
</head>
<body class="antialiased">
    <div class="min-h-screen">
        <header class="bg-gray-950/80 backdrop-blur-md shadow-lg shadow-blue-500/10 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center space-x-2">
                        <span class="text-2xl">ğŸ”Œ</span>
                        <h1 class="text-xl md:text-2xl font-bold text-header">å°ç£é›»å‹•è»Šå……é›»æŒ‡å—</h1>
                    </div>
                    <nav id="main-nav" class="hidden md:flex space-x-6">
                        <a href="#overview" class="nav-link text-gray-400 hover:text-blue-400 border-b-2 border-transparent pb-1">ç¸½è¦½</a>
                        <a href="#home-charging" class="nav-link text-gray-400 hover:text-blue-400 border-b-2 border-transparent pb-1">åœ¨å®¶å……é›»</a>
                        <a href="#public-charging" class="nav-link text-gray-400 hover:text-blue-400 border-b-2 border-transparent pb-1">å…¬å…±å……é›»</a>
                        <a href="#calculator" class="nav-link text-gray-400 hover:text-blue-400 border-b-2 border-transparent pb-1">é€Ÿåº¦è¨ˆç®—æ©Ÿ</a>
                    </nav>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

            <section id="overview" class="section space-y-12">
                <div class="text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-header sm:text-4xl">å°ç£é›»å‹•è»Šå……é›»ç”Ÿæ…‹é€Ÿè¦½</h2>
                    <p class="mt-4 text-lg leading-8 text-subheader">æœ¬ç¯€æä¾›å°ç£å……é›»è¦æ ¼çš„å¸‚å ´åˆ†ä½ˆæ¦‚æ³ï¼Œå¹«åŠ©æ‚¨å¿«é€Ÿäº†è§£ä¸»æµè¶¨å‹¢ã€‚é€éäº’å‹•å¼åœ–è¡¨ï¼Œæ‚¨å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°ç›´æµå¿«å……èˆ‡äº¤æµæ…¢å……çš„ç¾æ³ã€‚</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
                    <div class="card p-6 rounded-xl shadow-lg border">
                        <h3 class="text-xl font-semibold text-center text-header">DC ç›´æµå¿«å……è¦æ ¼å¸‚ä½”ç‡</h3>
                        <p class="text-center text-sm text-subheader mt-1 mb-4">(æˆªè‡³ 2024 Q1)</p>
                        <div class="chart-container">
                            <canvas id="dc-chart"></canvas>
                        </div>
                    </div>
                    <div class="card p-6 rounded-xl shadow-lg border">
                        <h3 class="text-xl font-semibold text-center text-header">AC äº¤æµæ…¢å……è¦æ ¼å¸‚ä½”ç‡</h3>
                        <p class="text-center text-sm text-subheader mt-1 mb-4">(æˆªè‡³ 2024 Q1)</p>
                        <div class="chart-container">
                            <canvas id="ac-chart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="home-charging" class="section space-y-12">
                <div class="text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-header sm:text-4xl">åœ¨å®¶å……é›»ï¼šæ‚¨çš„ç§äººåŠ æ²¹ç«™</h2>
                    <p class="mt-4 text-lg leading-8 text-subheader">å®¶æ˜¯é›»å‹•è»Šæœ€ä¸»è¦çš„å……é›»å ´æ‰€ã€‚æœ¬ç¯€å°‡æ¯”è¼ƒå°ç£æœ€å¸¸è¦‹çš„å…©ç¨®å®¶ç”¨å……é›»æ–¹å¼ï¼Œä¸¦èªªæ˜å®‰è£å£æ›å¼å……é›»æ¨çš„æ³¨æ„äº‹é …ï¼Œå¹«åŠ©æ‚¨åšå‡ºæœ€é©åˆçš„é¸æ“‡ã€‚</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="card p-8 rounded-xl shadow-lg border">
                        <h3 class="text-2xl font-bold text-header">110V å®¶ç”¨æ’åº§ (Level 1)</h3>
                        <p class="mt-2 text-body">ä½¿ç”¨éš¨è»Šé™„è´ˆçš„ä¾¿æ”œå¼å……é›»å™¨ï¼Œå¯ç›´æ¥æ’å…¥æ¨™æº–ç‰†å£æ’åº§ã€‚</p>
                        <ul class="mt-6 space-y-4 text-body">
                            <li class="flex items-center"><span class="text-2xl mr-3">âš¡ï¸</span><div><strong class="font-semibold text-gray-100">åŠŸç‡ï¼š</strong>ç´„ 1-2 kW</div></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">â±ï¸</span><div><strong class="font-semibold text-gray-100">é€Ÿåº¦ï¼š</strong>æ¯å°æ™‚ç´„å¢åŠ  5-8 å…¬é‡ŒçºŒèˆª</div></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">ğŸ‘</span><div><strong class="font-semibold text-gray-100">å„ªé»ï¼š</strong>ç„¡éœ€å®‰è£ã€ä¾¿åˆ©æ€§é«˜</div></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">ğŸ‘</span><div><strong class="font-semibold text-gray-100">ç¼ºé»ï¼š</strong>é€Ÿåº¦æ¥µæ…¢ï¼Œåƒ…é©åˆæ‡‰æ€¥æˆ– PHEV</div></li>
                        </ul>
                    </div>
                    <div class="bg-gray-800 p-8 rounded-xl shadow-lg border border-blue-700">
                        <h3 class="text-2xl font-bold text-accent">220V å£æ›å¼å……é›»æ¨ (Level 2)</h3>
                        <p class="mt-2 text-blue-400">ä¸»æµå®¶ç”¨å……é›»æ–¹æ¡ˆï¼Œéœ€ç”±å°ˆæ¥­äººå“¡å®‰è£å°ˆç”¨é›»è·¯èˆ‡å……é›»æ¨ã€‚</p>
                        <ul class="mt-6 space-y-4 text-blue-300">
                            <li class="flex items-center"><span class="text-2xl mr-3">âš¡ï¸âš¡ï¸</span><div><strong class="font-semibold text-blue-200">åŠŸç‡ï¼š</strong>ç´„ 7-11 kW</div></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">â±ï¸</span><div><strong class="font-semibold text-blue-200">é€Ÿåº¦ï¼š</strong>æ¯å°æ™‚ç´„å¢åŠ  40-60 å…¬é‡ŒçºŒèˆª</div></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">ğŸ‘</span><div><strong class="font-semibold text-blue-200">å„ªé»ï¼š</strong>é€Ÿåº¦å¿«ï¼Œå¯åœ¨ä¸€å¤œé–“å……æ»¿ï¼Œé›»è²»è¼ƒä½</div></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">ğŸ‘</span><div><strong class="font-semibold text-blue-200">ç¼ºé»ï¼š</strong>éœ€å®‰è£è²»ç”¨ï¼Œç¤¾å€å¤§æ¨“å¯èƒ½éœ€å”èª¿</div></li>
                        </ul>
                    </div>
                </div>
                 <div class="card p-8 rounded-xl shadow-lg mt-8 border">
                    <h3 class="text-2xl font-bold text-header">å®¶ç”¨å……é›»æ¨å®‰è£è€ƒé‡</h3>
                    <p class="mt-2 text-body">å®‰è£220Vå£æ›å¼å……é›»æ¨æ˜¯æå‡ç”¨è»Šé«”é©—çš„é—œéµã€‚ä»¥ä¸‹æ˜¯åœ¨å°ç£å®‰è£æ™‚éœ€è¦æ³¨æ„çš„å¹¾å€‹é‡é»ï¼š</p>
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-lg text-gray-100">1. æ³•è¦èˆ‡å®‰å…¨</h4>
                            <p class="mt-1 text-body">å®‰è£éœ€ç¬¦åˆå°é›»ã€Œç”¨æˆ¶ç”¨é›»è¨­å‚™è£ç½®è¦å‰‡ã€ï¼Œç”±åˆæ ¼é›»å·¥æ–½ä½œï¼Œç¢ºä¿ç·šè·¯ã€æ–·è·¯å™¨è¦æ ¼æ­£ç¢ºï¼Œä¸¦ç¢ºå¯¦æ¥åœ°ã€‚</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-gray-100">2. ç¤¾å€å”èª¿</h4>
                            <p class="mt-1 text-body">å±…ä½åœ¨å…¬å¯“å¤§å»ˆæ˜¯æœ€å¤§çš„æŒ‘æˆ°ã€‚é€šå¸¸éœ€è¦å–å¾—ç®¡å§”æœƒåŒæ„ï¼Œä¸¦å¯èƒ½æ¶‰åŠèˆ‡é„°å±…æºé€šé›»åŠ›è² è¼‰ã€å®‰å…¨åŠè²»ç”¨åˆ†æ”¤ç­‰å•é¡Œã€‚</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-gray-100">3. å®‰è£æˆæœ¬</h4>
                            <p class="mt-1 text-body">è²»ç”¨åŒ…å«å……é›»æ¨è¨­å‚™ã€å ´å‹˜è²»åŠå®‰è£æ–½å·¥è²»ã€‚ç¸½åƒ¹ä¾é›»çºœé•·åº¦ã€é‘½å­”ã€é›»ç®±å‡ç´šç­‰å› ç´ è€Œç•°ï¼Œä¸€èˆ¬ç´„åœ¨æ–°å°å¹£ 3 è¬è‡³ 10 è¬å…ƒä¸ç­‰ã€‚</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-gray-100">4. ç”³è«‹ç¨ç«‹é›»éŒ¶</h4>
                            <p class="mt-1 text-body">å¯ä»¥å‘å°é›»ç”³è«‹å°ˆç‚ºé›»å‹•è»Šè¨­è¨ˆçš„æ™‚é–“é›»åƒ¹é›»éŒ¶ï¼Œåˆ©ç”¨é›¢å³°æ™‚æ®µå……é›»å¯å¤§å¹…ç¯€çœé›»è²»ã€‚</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="public-charging" class="section space-y-12">
                 <div class="text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-header sm:text-4xl">å…¬å…±å……é›»ï¼šæ—…é€”ä¸­çš„èƒ½é‡è£œçµ¦</h2>
                    <p class="mt-4 text-lg leading-8 text-subheader">å°ç£å……é›»è¦æ ¼çœ¾å¤šï¼Œææ‡‚å®ƒå€‘æ˜¯é †æš¢å‡ºéŠçš„é—œéµã€‚æœ¬ç¯€æä¾›ä¸€å€‹äº’å‹•å¼æŒ‡å—ï¼Œé»æ“Šä¸‹æ–¹ä»»ä½•ä¸€å€‹å……é›»æ¥é ­ï¼Œå³å¯æŸ¥çœ‹å…¶è©³ç´°è¦æ ¼èˆ‡åœ¨å°æ‡‰ç”¨æƒ…æ³ã€‚</p>
                </div>

                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4">
                    <button class="connector-btn flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md border-2 border-gray-700 text-gray-200" data-connector="ccs2">
                        <span class="text-4xl">ğŸ‡ªğŸ‡º</span>
                        <span class="mt-2 font-semibold text-sm">CCS2</span>
                    </button>
                    <button class="connector-btn flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md border-2 border-gray-700 text-gray-200" data-connector="ccs1">
                        <span class="text-4xl">ğŸ‡ºğŸ‡¸</span>
                        <span class="mt-2 font-semibold text-sm">CCS1</span>
                    </button>
                     <button class="connector-btn flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md border-2 border-gray-700 text-gray-200" data-connector="j1772">
                        <span class="text-4xl">ğŸ”Œ</span>
                        <span class="mt-2 font-semibold text-sm">Type 1 (J1772)</span>
                    </button>
                    <button class="connector-btn flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md border-2 border-gray-700 text-gray-200" data-connector="type2">
                        <span class="text-4xl">ğŸ’¡</span>
                        <span class="mt-2 font-semibold text-sm">Type 2</span>
                    </button>
                    <button class="connector-btn flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md border-2 border-gray-700 text-gray-200" data-connector="nacs">
                        <span class="text-4xl">ğŸ‡¹</span>
                        <span class="mt-2 font-semibold text-sm">NACS/TPC</span>
                    </button>
                    <button class="connector-btn flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow-md border-2 border-gray-700 text-gray-200" data-connector="chademo">
                        <span class="text-4xl">ğŸ‡¯ğŸ‡µ</span>
                        <span class="mt-2 font-semibold text-sm">CHAdeMO</span>
                    </button>
                </div>

                <div id="connector-details" class="card p-8 rounded-xl shadow-lg transition-all duration-500 min-h-[300px] border">
                </div>
            </section>

            <section id="calculator" class="section space-y-12">
                 <div class="text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-header sm:text-4xl">å……é›»é€Ÿåº¦èˆ‡æ™‚é–“è¨ˆç®—æ©Ÿ</h2>
                    <p class="mt-4 text-lg leading-8 text-subheader">æƒ³çŸ¥é“å……é›»è¦èŠ±å¤šä¹…æ™‚é–“å—ï¼Ÿä½¿ç”¨ä¸‹æ–¹çš„è¨ˆç®—æ©Ÿï¼Œè¼¸å…¥æ‚¨çš„è»Šè¼›èˆ‡å……é›»æ¨è³‡è¨Šï¼Œå³å¯å¿«é€Ÿä¼°ç®—ç†è«–å……é›»æ™‚é–“ã€‚è«‹æ³¨æ„ï¼Œå¯¦éš›é€Ÿåº¦æœƒå—å¤šç¨®å› ç´ å½±éŸ¿ã€‚</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="card p-8 rounded-xl shadow-lg border">
                        <h3 class="text-2xl font-bold text-header">é ä¼°å……é›»æ™‚é–“</h3>
                        <div class="space-y-4 mt-6">
                            <div>
                                <label for="battery-size" class="block text-sm font-medium text-gray-400">1. é›»æ± ç¸½å®¹é‡ (kWh)</label>
                                <input type="number" id="battery-size" class="mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500" value="60">
                            </div>
                            <div>
                                <label for="current-soc" class="block text-sm font-medium text-gray-400">2. ç›®å‰é›»é‡ (%)</label>
                                <input type="number" id="current-soc" class="mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500" value="20">
                            </div>
                            <div>
                                <label for="target-soc" class="block text-sm font-medium text-gray-400">3. ç›®æ¨™é›»é‡ (%)</label>
                                <input type="number" id="target-soc" class="mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500" value="80">
                            </div>
                            <div>
                                <label for="charger-power" class="block text-sm font-medium text-gray-400">4. å……é›»åŠŸç‡ (kW)</label>
                                <select id="charger-power" class="mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                    <option value="7">7 kW (å®¶ç”¨/å…¬ç”¨AC)</option>
                                    <option value="11">11 kW (å®¶ç”¨/å…¬ç”¨AC)</option>
                                    <option value="50">50 kW (DCå¿«å……)</option>
                                    <option value="120" selected>120 kW (DCå¿«å……)</option>
                                    <option value="180">180 kW (DCå¿«å……)</option>
                                    <option value="350">350 kW (DCå¿«å……)</option>
                                </select>
                            </div>
                        </div>
                        <button id="calculate-btn" class="mt-8 w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-500 transition duration-300 shadow-md hover:shadow-blue-500/50">è¨ˆç®—æ™‚é–“</button>
                        <div id="calculation-result" class="mt-6 text-center bg-gray-800 p-6 rounded-lg" style="display: none;">
                        </div>
                    </div>
                    <div class="bg-gray-900 p-8 rounded-xl border border-gray-700">
                        <h3 class="text-2xl font-bold text-header">å½±éŸ¿å¯¦éš›å……é›»é€Ÿåº¦çš„é—œéµå› ç´ </h3>
                        <p class="mt-2 text-body">ç†è«–è¨ˆç®—æä¾›ä¸€å€‹åŸºæº–ï¼Œä½†å¯¦éš›å……é›»æ˜¯å€‹å‹•æ…‹éç¨‹ã€‚ä»¥ä¸‹å› ç´ æœƒè®“å……é›»æ™‚é–“è®Šé•·ï¼š</p>
                        <ul class="mt-6 space-y-4">
                            <li class="flex items-start">
                                <div class="flex-shrink-0 h-6 w-6 rounded-full bg-blue-800 text-blue-200 flex items-center justify-center font-bold">1</div>
                                <div class="ml-4">
                                    <h4 class="font-semibold text-gray-100">å……é›»æ›²ç·š (SoC)</h4>
                                    <p class="text-body">é›»æ± åœ¨ 20%-80% å€é–“å……é›»æœ€å¿«ã€‚ç‚ºäº†ä¿è­·é›»æ± ï¼Œç•¶é›»é‡è¶…é 80% å¾Œï¼Œå……é›»é€Ÿåº¦æœƒé¡¯è‘—ä¸‹é™ã€‚</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div class="flex-shrink-0 h-6 w-6 rounded-full bg-blue-800 text-blue-200 flex items-center justify-center font-bold">2</div>
                                <div class="ml-4">
                                    <h4 class="font-semibold text-gray-100">é›»æ± æº«åº¦</h4>
                                    <p class="text-body">é›»æ± å¤ªå†·æˆ–å¤ªç†±éƒ½æœƒå½±éŸ¿å……é›»æ•ˆç‡ã€‚è»Šè¼›çš„é›»æ± ç®¡ç†ç³»çµ±(BMS)æœƒèª¿ç¯€åŠŸç‡ä»¥ç¶­æŒæœ€ä½³æº«åº¦ã€‚</p>
                                </div>
                            </li>
                             <li class="flex items-start">
                                <div class="flex-shrink-0 h-6 w-6 rounded-full bg-blue-800 text-blue-200 flex items-center justify-center font-bold">3</div>
                                <div class="ml-4">
                                    <h4 class="font-semibold text-gray-100">è»Šè¼›æœ¬èº«é™åˆ¶</h4>
                                    <p class="text-body">å¯¦éš›å……é›»åŠŸç‡å–æ±ºæ–¼ã€Œå……é›»æ¨ã€å’Œã€Œè»Šè¼›ã€å…©è€…ä¸­çš„è¼ƒä½è€…ã€‚ä¾‹å¦‚ï¼Œæ‚¨çš„è»ŠACå……é›»ä¸Šé™ç‚º11kWï¼Œå³ä½¿æ¥ä¸Š22kWçš„ACå……é›»æ¨ï¼Œé€Ÿåº¦ä¹Ÿåªæœƒæœ‰11kWã€‚</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div class="flex-shrink-0 h-6 w-6 rounded-full bg-blue-800 text-blue-200 flex items-center justify-center font-bold">4</div>
                                <div class="ml-4">
                                    <h4 class="font-semibold text-gray-100">å……é›»æ¨å¯¦éš›è¼¸å‡º</h4>
                                    <p class="text-body">å……é›»ç«™çš„åŠŸç‡å¯èƒ½æœƒå› é›»ç¶²è² è¼‰æˆ–å¤šè»ŠåŒæ™‚å……é›»è€Œå‹•æ…‹åˆ†é…ï¼Œå°è‡´å¯¦éš›è¼¸å‡ºä½æ–¼æ¨™ç¤ºåŠŸç‡ã€‚</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            Chart.defaults.color = '#d1d5db'; // Default text color for charts (text-gray-300)
            const chartFont = {
                family: 'Inter, "Noto Sans TC", sans-serif'
            };

            const dcChartData = {
                labels: ['CCS2', 'CCS1', 'NACS/TPC', 'CHAdeMO'],
                datasets: [{
                    label: 'DC å¿«å……å¸‚ä½”ç‡',
                    data: [44.2, 33.8, 18.8, 3.2],
                    backgroundColor: [
                        '#3b82f6', // blue-500
                        '#60a5fa', // blue-400
                        '#93c5fd', // blue-300
                        '#bfdbfe', // blue-200
                    ],
                    borderColor: '#111827', // bg-gray-900 (card background)
                    borderWidth: 4,
                }]
            };

            const acChartData = {
                labels: ['Type 1 (J1772)', 'NACS/TPC', 'Type 2'],
                datasets: [{
                    label: 'AC æ…¢å……å¸‚ä½”ç‡',
                    data: [74.1, 16.0, 9.9],
                    backgroundColor: [
                        '#22c55e', // green-500
                        '#4ade80', // green-400
                        '#86efac', // green-300
                    ],
                    borderColor: '#111827', // bg-gray-900 (card background)
                    borderWidth: 4,
                }]
            };

            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: chartFont,
                            color: '#9ca3af', // text-gray-400
                            padding: 20
                        }
                    },
                    tooltip: {
                        bodyFont: chartFont,
                        titleFont: chartFont,
                        backgroundColor: '#1f2937', // bg-gray-800
                        titleColor: '#e5e7eb', // text-gray-200
                        bodyColor: '#d1d5db', // text-gray-300
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    label += context.raw + '%';
                                }
                                return label;
                            }
                        }
                    }
                },
                cutout: '60%',
            };

            if (document.getElementById('dc-chart')) {
                const dcCtx = document.getElementById('dc-chart').getContext('2d');
                new Chart(dcCtx, {
                    type: 'doughnut',
                    data: dcChartData,
                    options: chartOptions
                });
            }

            if (document.getElementById('ac-chart')) {
                const acCtx = document.getElementById('ac-chart').getContext('2d');
                new Chart(acCtx, {
                    type: 'doughnut',
                    data: acChartData,
                    options: chartOptions
                });
            }
            

            const connectorData = {
                ccs2: {
                    name: 'CCS2 (Combined Charging System 2)',
                    type: 'AC/DC æ•´åˆå¿«å……',
                    power: 'DC: 50-350+ kW | AC: æœ€é«˜ 22 kW',
                    features: 'æ­æ´²ä¸»æµæ¨™æº–ï¼Œæ•´åˆ Type 2 AC æ¥é ­èˆ‡ DC å¿«å……é‡è…³ã€‚',
                    prevalence: 'å°ç£ DC å¿«å……æœ€å¤§å®—ä¸”æˆé•·æœ€å¿«ï¼Œç‚ºæ–°æ¬¾ Tesla åŠçœ¾å¤šæ­ç³»è»Šæ¬¾æ¡ç”¨ã€‚'
                },
                ccs1: {
                    name: 'CCS1 (Combined Charging System 1)',
                    type: 'AC/DC æ•´åˆå¿«å……',
                    power: 'DC: 50-350 kW | AC: æœ€é«˜ 7.4 kW',
                    features: 'åŒ—ç¾ä¸»æµæ¨™æº–ï¼Œæ•´åˆ J1772 AC æ¥é ­èˆ‡ DC å¿«å……é‡è…³ã€‚',
                    prevalence: 'å°ç£ DC å¿«å……ç¬¬äºŒå¤§è¦æ ¼ï¼Œç‚ºçœ¾å¤šç¾ç³»ã€éŸ“ç³»åŠéƒ¨åˆ†æ­ç³»è»Šæ¬¾æ¡ç”¨ã€‚'
                },
                j1772: {
                    name: 'Type 1 (SAE J1772)',
                    type: 'AC äº¤æµæ…¢å……',
                    power: '3.5 kW - 7.4 kW (å¸¸è¦‹)',
                    features: '5 é‡è…³è¨­è¨ˆï¼ŒåŒ—ç¾åŠæ—¥æœ¬ AC å……é›»æ¨™æº–ã€‚',
                    prevalence: 'å°ç£å…¬å…± AC æ…¢å……çš„çµ•å°ä¸»æµï¼Œæ™®åŠåº¦æœ€é«˜ã€‚'
                },
                type2: {
                    name: 'Type 2 (Mennekes)',
                    type: 'AC äº¤æµæ…¢å……',
                    power: '7 kW - 22 kW (è¦–å–®/ä¸‰ç›¸é›»)',
                    features: '7 é‡è…³è¨­è¨ˆï¼Œæ­æ´² AC å……é›»æ¨™æº–ï¼Œæ”¯æ´ä¸‰ç›¸é›»ã€‚',
                    prevalence: 'éš¨ CCS2 è»Šè¼›å¢åŠ ï¼Œåœ¨å°ç£çš„èƒ½è¦‹åº¦èˆ‡æˆé•·ç‡å‡å¿«é€Ÿæå‡ã€‚'
                },
                nacs: {
                    name: 'NACS / TPC (Tesla Connector)',
                    type: 'AC/DC æ•´åˆè¦æ ¼',
                    power: 'DC: æœ€é«˜ 250 kW | AC: ä¾è»Šè¼› OBC',
                    features: 'Tesla å°ˆæœ‰è¦æ ¼ï¼Œè¨­è¨ˆè¼•å·§ï¼Œå–®ä¸€æ¥é ­æ”¯æ´æ…¢å……èˆ‡è¶…å……ã€‚',
                    prevalence: 'é©ç”¨æ–¼ 2021 å¹´ç¬¬ä¸‰å­£å‰çš„èˆŠæ¬¾ Teslaã€‚æ–°è»Šå·²æ”¹ç‚º CCS2ã€‚'
                },
                chademo: {
                    name: 'CHAdeMO',
                    type: 'DC ç›´æµå¿«å……',
                    power: 'ç´„ 50 - 62.5 kW',
                    features: 'æ—¥æœ¬ç™¼å±•çš„å¿«å……æ¨™æº–ï¼Œåç¨±ç‚º "CHArge de MOve" çš„ç¸®å¯«ã€‚',
                    prevalence: 'åœ¨å°ç£å¸‚ä½”ç‡æ¥µä½ä¸”æŒçºŒèç¸®ï¼Œä¸»è¦ç‚º Nissan Leaf ç­‰æ—¥ç³»è»Šæ¬¾ä½¿ç”¨ã€‚'
                }
            };
            
            const connectorBtns = document.querySelectorAll('.connector-btn');
            const detailsPanel = document.getElementById('connector-details');

            function updateDetails(connectorId) {
                const data = connectorData[connectorId];
                if (!data || !detailsPanel) return;

                detailsPanel.innerHTML = `
                    <h3 class="text-2xl font-bold text-header">${data.name}</h3>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4">
                        <div>
                            <p class="text-sm font-medium text-subheader">é¡å‹</p>
                            <p class="text-lg font-semibold text-body">${data.type}</p>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-subheader">å¸¸è¦‹åŠŸç‡</p>
                            <p class="text-lg font-semibold text-body">${data.power}</p>
                        </div>
                        <div class="md:col-span-2">
                            <p class="text-sm font-medium text-subheader">ä¸»è¦ç‰¹é»</p>
                            <p class="text-lg font-semibold text-body">${data.features}</p>
                        </div>
                        <div class="md:col-span-2">
                            <p class="text-sm font-medium text-subheader">åœ¨å°æ™®åŠç‹€æ³</p>
                            <p class="text-lg font-semibold text-body">${data.prevalence}</p>
                        </div>
                    </div>
                `;
                
                connectorBtns.forEach(btn => {
                    btn.classList.remove('active', 'border-accent');
                    if(btn.dataset.connector === connectorId) {
                        btn.classList.add('active', 'border-accent');
                    }
                });
            }

            if (connectorBtns.length > 0 && detailsPanel) {
                connectorBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        updateDetails(btn.dataset.connector);
                    });
                });
                updateDetails('ccs2'); 
            }
            

            const calculateBtn = document.getElementById('calculate-btn');
            const resultDiv = document.getElementById('calculation-result');
            if (calculateBtn && resultDiv) {
                calculateBtn.addEventListener('click', () => {
                    const batterySize = parseFloat(document.getElementById('battery-size').value);
                    const currentSoc = parseFloat(document.getElementById('current-soc').value);
                    const targetSoc = parseFloat(document.getElementById('target-soc').value);
                    const power = parseFloat(document.getElementById('charger-power').value);

                    if (isNaN(batterySize) || isNaN(currentSoc) || isNaN(targetSoc) || isNaN(power) || batterySize <= 0 || power <= 0) {
                        resultDiv.innerHTML = `<p class="font-bold text-red-500">è«‹è¼¸å…¥æœ‰æ•ˆçš„æ•¸å€¼</p>`;
                        resultDiv.style.display = 'block';
                        return;
                    }
                    
                    if (currentSoc >= targetSoc) {
                        resultDiv.innerHTML = `<p class="font-bold text-red-500">ç›®æ¨™é›»é‡éœ€å¤§æ–¼ç›®å‰é›»é‡</p>`;
                        resultDiv.style.display = 'block';
                        return;
                    }

                    const kwhNeeded = batterySize * (targetSoc - currentSoc) / 100;
                    const timeHours = kwhNeeded / power;
                    const hours = Math.floor(timeHours);
                    const minutes = Math.round((timeHours - hours) * 60);

                    resultDiv.innerHTML = `
                        <p class="text-subheader">å¾ ${currentSoc}% å……åˆ° ${targetSoc}% (${kwhNeeded.toFixed(1)} kWh):</p>
                        <p class="text-4xl font-bold text-accent mt-2">${hours} å°æ™‚ ${minutes} åˆ†é˜</p>
                        <p class="text-xs text-gray-500 mt-3">æ­¤ç‚ºç†è«–ä¼°ç®—å€¼ï¼Œå¯¦éš›æ™‚é–“å¯èƒ½å› å¤šç¨®å› ç´ è€Œç•°ã€‚</p>
                    `;
                    resultDiv.style.display = 'block';
                });
            }
            
            const navMenu = document.getElementById('main-nav');
            const navLinks = navMenu ? navMenu.querySelectorAll('.nav-link') : [];
            const sections = document.querySelectorAll('.section');
            const headerOffset = 80; 

            function changeNavOnScroll() {
                let currentSectionId = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - headerOffset - 10; 
                    const sectionBottom = sectionTop + section.offsetHeight;
                    if (window.scrollY >= sectionTop && window.scrollY < sectionBottom) {
                        currentSectionId = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + currentSectionId) {
                        link.classList.add('active');
                    }
                });
            }

            if (navLinks.length > 0 && sections.length > 0) {
                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetId = link.getAttribute('href');
                        const targetSection = document.querySelector(targetId);
                        if (targetSection) {
                            if(history.pushState) {
                                history.pushState(null, null, targetId);
                            } else {
                                window.location.hash = targetId;
                            }
                            navLinks.forEach(lnk => lnk.classList.remove('active'));
                            link.classList.add('active');
                            
                            // Manually trigger scroll to the section after hash update
                            // as smooth scroll might not always fire correctly with pushState
                            // or if the element is already in view but not perfectly aligned.
                            window.scrollTo({
                                top: targetSection.offsetTop - headerOffset,
                                behavior: 'smooth'
                            });
                        }
                    });
                });

                window.addEventListener('scroll', changeNavOnScroll);
                
                let initialHash = window.location.hash;
                if (initialHash) {
                    const activeLink = navMenu.querySelector(`a[href="${initialHash}"]`);
                    if (activeLink) {
                         navLinks.forEach(lnk => lnk.classList.remove('active'));
                         activeLink.classList.add('active');
                         const targetSection = document.querySelector(initialHash);
                         if (targetSection) {
                            setTimeout(() => { // Ensure layout is complete
                                window.scrollTo({
                                    top: targetSection.offsetTop - headerOffset,
                                    behavior: 'auto' // Use auto for initial load jump
                                });
                            }, 0);
                         }
                    } else if (navLinks.length > 0) {
                        navLinks[0]?.classList.add('active');
                    }
                } else if (navLinks.length > 0) {
                    navLinks[0].classList.add('active');
                }
                changeNavOnScroll(); 
            }
        });
    </script>
</body>
</html>
